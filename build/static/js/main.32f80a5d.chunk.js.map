{"version":3,"sources":["components/Person.js","components/Notification.js","services/dbService.js","App.js","index.js"],"names":["Person","person","handleDelete","name","number","onClick","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","request","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterName","setFilterName","errorMessage","setErrorMessage","useEffect","dbService","personToShow","filter","match","onSubmit","event","preventDefault","personObject","length","filteredMatch","concat","window","confirm","map","console","log","value","onChange","target","type","updatedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.32f80a5d.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({ person, handleDelete }) => {\n  return (\n    <div>\n      {person.name} {person.number}\n      <button onClick={handleDelete}>delete</button>\n    </div>    \n  )\n}\n\nexport default Person","import React from 'react'\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n  \nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n  \nconst edit = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(request => request.data)\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { getAll, create, edit, deletePerson }","import React, { useEffect, useState } from 'react'\nimport Person from './components/Person'\nimport Notification from './components/Notification'\nimport dbService from './services/dbService'\nimport './index.css'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterName, setFilterName ] = useState('')\n  const [errorMessage, setErrorMessage] = useState('Phonebook dev app')\n\n  // State hooks for name changes\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterName = (event) => {\n    setFilterName(event.target.value)\n  }\n\n  // Effect hook for fetching information from database\n  useEffect(() => {\n    dbService\n      .getAll()\n      .then(response => \n        setPersons(response))\n  }, [])\n\n  // When name is added\n  const addName = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length + 1\n    }\n    // Check whether the newName is in the PhoneBook\n    const filteredMatch = persons.filter(person => person.name === newName)\n    if (filteredMatch.length === 0) {\n      dbService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(personObject))\n        })\n      setErrorMessage(`Added ${newName}`)\n    } else {\n      const result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (result) {\n        dbService\n          .edit(filteredMatch[0].id, personObject)\n          .then(response => {\n            setPersons(persons.map(person => person.id !== filteredMatch[0].id ? person : response))\n          })\n          setErrorMessage(`Updated number for ${newName}`)\n      }else{\n        console.log(\"cancelled\")\n      }\n    }\n  }\n\n  // Constant to store filtered list of person to show\n  const personToShow = persons.filter(person => person.name.match(filterName))\n\n  const handleDelete = (name, id) => {\n    const result = window.confirm(`Delete ${name}?`)\n    if (result) {\n      const updatedPerson = persons.filter(person => person.id !== id)\n      dbService\n        .deletePerson(id)\n        .then(response => {\n          setPersons(updatedPerson)\n          setErrorMessage(`Deleted contact ${name}`)\n      })\n    }\n  }\n\n  return (\n    <div>\n      <Notification message={errorMessage} />\n      <h2>Phonebook</h2>\n      \n      <form onSubmit={addName}>\n        <div>\n          Filter name:\n          <input\n            value={filterName}\n            onChange={handleFilterName}              \n          />\n        </div>\n        <h2>add a new contact</h2>\n        <div>\n          name: <input \n            value={newName}\n            onChange={handleNameChange}\n          /><br />\n            number: <input \n            value={newNumber}\n            onChange={handleNumberChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n        {personToShow.map(person =>\n          <Person            \n            key={person.id}\n            person={person}\n            handleDelete={() => handleDelete(person.name, person.id)}\n          />\n        )}\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}